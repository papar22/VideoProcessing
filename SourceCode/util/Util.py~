import numpy as np
import os 

# Import everything needed to edit video clips
from moviepy.editor import *
from moviepy.Clip import *
#from moviepy.video.tools.cuts import FramesMatches
#from moviepy.video.fx.crop import crop
from moviepy.video.VideoClip import *
from moviepy.config import get_setting # ffmpeg, ffmpeg.exe, etc...

#Importing ploting libraries for shoeing purposes
import matplotlib.pyplot as plt
from pylab import *

# Importing Opencv
import cv2




def rectify_coordinates(oldCoordinates):
        
    '''
    This function serves to rectify the coordinate of the detected slide area
    to the order like: [TOP-LEFT, TOP-RIGHT, BOTTOM-RIGHT, BOTTOM-LEFT ]
    '''
        
    oldCoordinates = oldCoordinates.reshape((4,2))
    newCoordinates = np.zeros((4,2),dtype = np.float32)

    add = oldCoordinates.sum(1)
    newCoordinates[0] = oldCoordinates[np.argmin(add)]
    newCoordinates[2] = oldCoordinates[np.argmax(add)]

    diff = np.diff(oldCoordinates,axis = 1)
    newCoordinates[1] = oldCoordinates[np.argmin(diff)]
    newCoordinates[3] = oldCoordinates[np.argmax(diff)]

    return newCoordinates  
